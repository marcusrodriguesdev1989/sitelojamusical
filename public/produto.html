<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Detalhes do Produto</title>
    <link href="/css/styles.css" rel="stylesheet" />
  </head>
  <style>
    /* HEADER */
    header {
      background: rgb(70, 69, 69);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      padding: 1rem;
    }

    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    /* Logo */
    .logo {
      font-size: 2rem !important;
      font-weight: bold;
      color: #0084ff;
      text-decoration: none;
    }

    .logo span {
      color: rgb(246, 248, 250) !important;
    }

    /* Menu Desktop */
    .nav-links {
      display: flex;
      gap: 1.5rem;
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .nav-links a {
      color: white !important;
      text-decoration: none;
      transition: color 0.3s;
    }

    .nav-links a:hover {
      color: #324cdd !important;
    }

    /* Botão Login Desktop */
    .login-button {
      background-color: #2563eb !important; /* Azul principal */
      color: white !important;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      text-decoration: none;
      transition: background-color 0.3s;
    }

    .login-button:hover {
      background-color: #1e40af !important; /* Azul mais escuro no hover */
    }

    /* Mobile */
    #menu-toggle {
      display: none;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: white !important;
      cursor: pointer;
    }

    #mobile-menu.active {
      display: block !important;
    }

    #mobile-menu {
      display: none;
      position: absolute;
      top: 75px;
      right: 1rem;
      background: white;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      border-radius: 5px;
      padding: 1rem;
      list-style: none;
      width: 150px;
      z-index: 1000;
      flex-direction: column;
      align-items: flex-start;
    }

    #mobile-menu a {
      color: #34495e;
      text-decoration: none;
      padding: 0.5rem 0;
      display: block;
      transition: color 0.3s;
    }

    #mobile-menu a:hover {
      color: #1abc9c;
    }

    /* Responsividade */
    @media (max-width: 1023px) {
      .nav-links,
      .login-button-desktop {
        display: none;
      }

      #menu-toggle {
        display: block;
      }

      #mobile-menu.active {
        display: block;
      }

      /* Login no mobile menu */
      .login-button-mobile {
        margin-top: 1rem;
        width: 100%;
        text-align: center;
      }
    }

    /* Dropdown do menu "Produtos" */
    .group:hover .group-hover\:block {
      display: block !important;
    }

    .group {
      position: relative;
    }

    .group-hover\:block {
      display: none;
    }

    /* Estilo do dropdown */
    .group ul {
      position: absolute;
      min-width: 110px;
      top: 100%;
      right: 0;
      background: white;
      border-radius: 5px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 0.5rem 0;
      list-style: none;
      white-space: nowrap;
      z-index: 1000;
    }

    .group ul li a {
      color: black !important;
      white-space: normal; /* Permite que o texto quebre se necessário */
      word-break: break-all;
      padding: 0.5rem 1rem;
      display: block;
      text-align: left;
      transition: background 0.3s;
    }

    .group ul li a:hover {
      background: #f0f0f0;
      color: #1abc9c !important;
    }

    /* Estilo do Card do Produto */
    .product-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  margin: 2rem auto;
  max-width: 90%; /* Garante que o card seja responsivo */
}

/* Título do Produto */
#product-name {
  font-size: 1.5rem; /* Tamanho do título */
  margin-bottom: 1rem; /* Espaçamento entre o título e a imagem */
}

/* Imagem Principal */
.product-image {
  display: flex;
  justify-content: center; /* Centraliza horizontalmente */
  align-items: center; /* Centraliza verticalmente */
  margin: 0 auto; /* Centraliza o container no pai */
  width: 50%; /* Reduz o tamanho da imagem principal para 50% */
}

.product-image img {
  width: 100%; /* A imagem ocupa 100% do container */
  height: auto; /* Mantém a proporção da imagem */
  object-fit: cover; /* Garante que a imagem não fique distorcida */
  border-radius: 8px; /* Borda arredondada */
}

@media (min-width: 640px) {
  .product-image img {
    width: 60%; /* Reduz o tamanho da imagem em telas maiores */
  }
}

/* Galeria de Miniaturas */
.image-gallery img {
  width: 60px;
  height: 60px;
  object-fit: cover;
  border: 2px solid transparent;
  border-radius: 4px;
  cursor: pointer;
  transition: border-color 0.3s ease;
}

.image-gallery img:hover {
  border-color: #2563eb;
}

/* Informações do Produto */
.product-details {
  text-align: center;
  width: 100%;
}

.product-details h3 {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
}

.product-details p {
  margin-bottom: 1rem;
}

/* Botão de Contato */
#whatsapp-link {
  display: inline-block;
  background-color: #25d366;
  color: white;
  padding: 10px 20px;
  border-radius: 5px;
  text-decoration: none;
  font-weight: bold;
  transition: background-color 0.3s ease;
}

#whatsapp-link:hover {
  background-color: #128c7e;
}

/* Estilo para as miniaturas */
.image-gallery img.thumbnail {
  width: 60px;
  height: 60px;
  object-fit: cover;
  border: 2px solid transparent;
  border-radius: 4px;
  cursor: pointer;
  transition: border-color 0.3s ease;
}

/* Destaca a miniatura selecionada */
.image-gallery img.thumbnail:hover,
.image-gallery img.thumbnail.active {
  border-color: #2563eb; /* Azul consistente */
}
  </style>
  <body class="bg-gray-100">
    <header class="bg-[#464545] shadow-md">
      <nav
        class="container mx-auto px-4 py-4 flex justify-between items-center"
      >
        <!-- Logo (Esquerda) -->
        <a href="/" class="logo">GuitarSP<span>Centro</span></a>

        <!-- Menu Centralizado -->
        <div class="hidden md:flex space-x-4">
          <ul class="nav-links flex items-center">
            <li>
              <a
                href="/"
                class="text-white hover:text-blue-600 transition duration-300"
                >Home</a
              >
            </li>
            <li class="relative group">
              <a
                href="/produtos"
                class="text-white hover:text-blue-600 transition duration-300"
                >Produtos</a
              >
              <ul
                class="absolute hidden group-hover:block bg-white shadow-md rounded-md py-2 space-y-1 text-gray-700 text-sm w-40"
                style="top: 100%; left: 0"
              >
                <li>
                  <a
                    href="/produtos/cordas"
                    class="block px-4 py-2 hover:bg-blue-50 text-black"
                    >Cordas</a
                  >
                </li>
                <li>
                  <a
                    href="/produtos/teclas"
                    class="block px-4 py-2 hover:bg-blue-50 text-black"
                    >Teclas</a
                  >
                </li>
                <li>
                  <a
                    href="/produtos/audio"
                    class="block px-4 py-2 hover:bg-blue-50 text-black"
                    >Áudio</a
                  >
                </li>
                <li>
                  <a
                    href="/produtos/bateria"
                    class="block px-4 py-2 hover:bg-blue-50 text-black"
                    >Bateria</a
                  >
                </li>
                <li>
                  <a
                    href="/produtos/percussao"
                    class="block px-4 py-2 hover:bg-blue-50 text-black"
                    >Percussão</a
                  >
                </li>
                <li>
                  <a
                    href="/produtos/acessorios"
                    class="block px-4 py-2 hover:bg-blue-50 text-black"
                    >Acessórios</a
                  >
                </li>
              </ul>
            </li>
            <li>
              <a
                href="#about"
                class="text-white hover:text-blue-600 transition duration-300"
                >Sobre</a
              >
            </li>
            <li>
              <a
                href="/contato"
                class="text-white hover:text-blue-600 transition duration-300"
                >Contato</a
              >
            </li>
          </ul>
        </div>

        <!-- Botão Login e Hambúrguer (Direita) -->
        <div class="flex items-center">
          <a href="/login" class="login-button login-button-desktop">Login</a>
          <button
            id="menu-toggle"
            class="md:hidden text-white focus:outline-none text-2xl"
          >
            ☰
          </button>
        </div>
      </nav>

      <!-- Mobile Menu -->
      <ul
        id="mobile-menu"
        class="hidden md:hidden bg-white shadow-lg rounded-lg absolute right-4 top-16 w-48 space-y-4 p-4"
      >
        <li><a href="/">Home</a></li>
        <li><a href="#about">Sobre</a></li>
        <li><a href="/produtos">Produtos</a></li>
        <li><a href="/contato">Contato</a></li>
        <li>
          <a href="/login" class="login-button login-button-mobile">Login</a>
        </li>
      </ul>
    </header>

    <main class="container mx-auto px-4 py-8">
      <div class="product-card bg-white p-6 rounded-lg shadow-md max-w-4xl mx-auto">
        <!-- Título do Produto -->
        <h3 id="product-name" class="text-2xl font-bold text-gray-800 mb-4 text-center">Carregando...</h3>
      
        <!-- Imagem Principal -->
        <div class="product-image mb-6">
          <img id="main-image" src="" alt="Imagem do Produto" class="w-full h-auto object-cover rounded-md">
        </div>
      
        <!-- Galeria de Miniaturas -->
        <div class="image-gallery flex space-x-2 mb-6">
          <!-- As miniaturas serão inseridas dinamicamente aqui -->
        </div>
      
        <!-- Detalhes do Produto -->
        <div class="product-details">
          <p id="product-price" class="text-green-600 text-xl font-semibold mb-4">Carregando preço...</p>
          <p id="product-description" class="text-gray-600 mb-6">Carregando descrição...</p>
      
          <!-- Dados do Vendedor -->
          <div class="seller-info bg-gray-50 p-4 rounded-md mb-6">
            
          </div>
      
          <!-- Botão de Contato -->
          <a id="whatsapp-link" href="#" target="_blank" class="block bg-green-500 text-white text-center py-3 px-6 rounded-md hover:bg-green-600 transition duration-300">
            Entrar em Contato via WhatsApp
          </a>
        </div>
      </div>
    </main>
  
    <script>
      document.addEventListener('DOMContentLoaded', async () => {
  const urlParams = new URLSearchParams(window.location.search);
  const productId = urlParams.get('id');

  if (!productId) {
    document.body.innerHTML = '<p class="text-red-600 text-center">ID do produto não encontrado.</p>';
    return;
  }

  try {
    // Busca os detalhes do produto no backend
    const response = await fetch(`/api/products/${productId}`);
    if (!response.ok) throw new Error('Erro ao buscar detalhes do produto.');

    const product = await response.json();

    // Preenche os detalhes do produto
    document.getElementById('product-name').textContent = product.name;
    document.getElementById('product-description').textContent = product.description;
    document.getElementById('product-price').textContent = `R$ ${product.price.toFixed(2)}`;
  

    // Define a imagem principal (primeira imagem)
    document.getElementById('main-image').src = `/uploads/${product.images[0]}`;

    // Cria a galeria de miniaturas
    const gallery = document.querySelector('.image-gallery');
    product.images.forEach((image, index) => {
      const imgElement = document.createElement('img');
      imgElement.src = `/uploads/${image}`;
      imgElement.alt = product.name;
      imgElement.classList.add('thumbnail'); // Adiciona uma classe para estilização
      imgElement.onclick = () => changeMainImage(index, product.images); // Função para trocar a imagem principal
      gallery.appendChild(imgElement);
    });

    // Atualiza o link do WhatsApp
    document.getElementById('whatsapp-link').href = `https://wa.me/${product.sellerPhone}?text=Olá, estou interessado no produto "${product.name}"`;
  } catch (error) {
    console.error(error);
    document.body.innerHTML = '<p class="text-red-600 text-center">Erro ao carregar detalhes do produto.</p>';
  }
});

// Função para trocar a imagem principal
function changeMainImage(index, images) {
  const mainImage = document.getElementById('main-image');
  mainImage.src = `/uploads/${images[index]}`;
}

// Função para trocar a imagem principal
function changeImage(index) {
  const mainImage = document.getElementById('main-image');
  mainImage.src = `/uploads/${product.images[index]}`;
}
    </script>
    <script>
      // Script para alternar o menu mobile
      document.getElementById("menu-toggle").addEventListener("click", () => {
        const mobileMenu = document.getElementById("mobile-menu");
        mobileMenu.classList.toggle("active"); // Adiciona/remove a classe 'active'
      });
    </script>
  </body>
</html>
